<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>NodeJS</title>
        <meta name="description" content="A nodeJS Course ">
        <meta name="author" content="Rémi Collignon">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/league2.css" id="theme">
        <style>
            pre {
                background-color: #3f3f3f;
            }
        </style>
        <!--link rel="stylesheet" href="css/theme/black.css" id="theme"-->
        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">
        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="reveal">
            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section data-background="node-bg.png">
                </section>
                <section>
                    <img data-src="node.png" style="border: none;background: none;box-shadow: none">
                    <h5>by <a href="https://remi.rcdinfo.fr">Rémi Collignon</a> for <a href="https://twitter.com/ClubElecIsen">@ClubElecIsen</a> <3</h5>
                </section>
                <section>
                    <section>
                        <h2>KESAKO?</h2>
                        <img src="cool.jpg" style="width: 30%">
                        <aside class="notes">
                            <ul>
                                <li>J'aime nouvelle techno</li>
                                <li>alternative apache</li>
                                <li>repartir en voulant l'essayer</li>
                            </ul>

                        </aside>
                    </section>
                    <section>
                        <h2>Etudiant en M1</h2>
                        <img src="not-expert.jpg">
                    </section>
                    <section>
                        <p>Un serveur web non bloquant</p>
                        <p>Basé sur des Events</p>
                        <p>Codé en Javascript</p>
                        <p>Cross-platform</p>
                        <img src="comp.png">
                    </section>
                    <section>
                        <h2>Exemple de projet</h2>
                        <a href="https://github.com/NodeBB/NodeBB">
                            <img src="nodebb.PNG" >
                        </a>
                    </section>
                    <section>
                        <h2>même en tant qu'appli de bureau</h2>
                        <img src="gitkraken.jpg" style="width: 33%">
                        <img src="postman.png" style="width: 33%">
                        <img src="atom.png" style="width: 33%; background-color: white">
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Interêts</h2>
                        <ul>
                            <li>Coder en <span class="fragment highlight-red visible">Javascript</span> coté serveur.</li>
                            <li>Avoir un serveur web entièrement configurable avec <span class="fragment highlight-blue visible">1 langage</span></li>
                            <li>Un serveur web performant</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Inconvénients</h2>
                        <ul>
                            <li>Gestion des dépendances bordélique</li>
                            <li>Scalabilité = 0</li>
                            <img src="no.jpg">
                        </ul>
                    </section>
                </section>
                <section>
                    <h2>Ok, mais avec quel editeur?</h2>
                    <img src="atom.png" style="background-color: white; width: 33%">
                    <img src="brackets.jpg" style="width: 33%">
                    <img src="webstorm.png" style="width: 33%">
                </section>

                <section>
                    <section>
                        <h2>Rappels</h2>
                    </section>
                    <section>
                        <h3>Les callbacks</h3>
                        <p>Utilisation pour des appels asynchrones</p>
                        <p>Ce n'est qu'une fonction</p>
                        <pre>
                            <code>
$http({
    method: 'GET',
    url: "https://test.fr",


}).then( function(res) {
    console.log( res );
});
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Les objets</h2>
                        <pre>
                            <code>
var myObjet = {
    "fn":      function() {},
    "name":    "Cours de node",
    "useless": false
}
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Les modules</h2>
                        <pre>
                            <code>
const fs = require('fs');
fs.show();
                            </code>
                            <code>
module.exports = {
    "show": function() {
        console.log( 'You should try Node' );
    }
}
                            </code>
                        </pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Comment on l'installe</h2>
                        <p>En ligne de commande !!!</p>
                        <br>
                        <a href="https://nodejs.org/en/download/stable/"> Par ici pour les utilisateurs Windows & Mac
                        </a>
                        <p>Pour les linuxiens : </p>
                        <pre>
                            <code class="hljs bash" data-trim >
                            # Ubuntu & Débian
$ apt-get install nodejs
# Gentoo
$ yum install nodejs
# Arch
$ yaourt nodejs npm
                            </code>
                        </pre>
                        <p class="fragment current-visible">N'oubliez pas d'ajouter le chemin de Node dans votre variable d'environnement PATH</p>
                    </section>
                    <section>
                        <p>Petite vérification pour voir si tout fonctionne : </p>
                        <pre>
                            <code class="hljs bash" data-trim contenteditable>
$ node -v
v5.8.0
                            </code>
                        </pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Notre premier projet!</h2>
                        <pre>
                            <code class="hljs bash" data-trim contenteditable>
$ mkdir MyProject && cd MyProject

$ npm init
name: my-project
version: 0.0.1
description: My NodeJS HelloWorld
entry point: main.js
test command:
git repository:
keywords:
author: miton
license: MIT
Is it ok? yes

$ ls
 package.json
                            </code>
                        </pre>
                        <aside class="notes">
                            <ul>
                                <li>Interets: partage de l'app</li>
                                <li>gestion des dépendances</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Le package.json</h2>
                        <h5>Le saint fichier</h5>
                        <pre>
                            <code class="hljs json">
{
  "name": "my-project",
  "version": "0.0.1",
  "description": "My NodeJS HelloWorld",
  "main": "main.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "miton",
  "license": "MIT"
}
                            </code>
                        </pre>
                        <p>Gestion de dépendances</p>
                    </section>
                    <section>
                        <h2>Ajout d'une dépendance</h2>
                        <pre>
                            <code class="hljs bash">
$ npm install --save express
                            </code>
                            <code class="hljs json">
"dependencies": {
  "express": "^4.13.4"
}
                            </code>
                            <code class="hljs bash">$ npm install --save-dev lite-server</code>
                            <code class="hljs json">
"devDependencies": {
  "lite-server": "^2.1.0"
}
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>D'où sortent ces packets</h2>
                        <p>Site officiel de
                            <a href="https://www.npmjs.com/">NPM</a>
                        </p>
                        <ul>
                            <p>+200 000 packets pour:</p>
                            <li>Builder vos app (Grunt, gulp, jade, sass)</li>
                            <li>Vous faciliter la vie (Express, Americano, Bower, Forever)</li>
                            <li>Sortir du code optimisé (min-css, uglifyjs, concat)</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Et concrètement un serveur web?</h2>
                        <div class="fragment">
                            <p>C'est ça !</p>
                            <pre>
                                <code class="hljs">main.js : </code>
                                <code class="hljs javascript">
var http = require('http');

http
.createServer( function(request, response) {

        response.write("<h1>HelloWorld</h1>");
        response.end();

})
.listen( 8080 );
                                </code>
                                <code class="hljs bash">$ node main.js</code>
                            </pre>
                        </div>
                        <aside class="notes">
                            On prends tout ce qu'on a vu precédement et on melange
                        </aside>
                    </section>
                    <section>
                        <h3>Requête &rarr; réponse</h3>
                        <img src="first.jpg">
                    </section>
                </section>
                <section>
                    <section>
                        <img src="please.jpg">
                    </section>
                    <section>
                        <ul>
                            <li>Cas 1 : je sers mon site statique (html, css, js)</li>
                        </ul>
                        <pre>
                            <code class="hljs javascript">
var express = require('express');
var path    = require('path');

var app     = express();

var staticFolder    = path.join(__dirname, '/public');
var staticRessource = express.static(staticFolder);

app.get('/*', staticRessource);

app.listen(8080);
                            </code>
                        </pre>
                    </section>
                    <section>
                        <ul>
                            <li>Cas 2 : Je sers une API</li>
                        </ul>
                        <pre>
                            <code class="hljs javascript">
app.get('/messages', function(req, res){

    res.json({
        err: null,
        state: "Liste des messages!"
    })
});

app.post('/messages', function(req, res){

    res.json({
        err: null,
        state: "Message posté!"
    })
});
                            </code>
                        </pre>
                    </section>
                    <section>
                        <ul>
                            <li>Cas 3 : Je sers du contenu personnalisé</li>
                        </ul>
                        <pre>
                            <code class="hljs javascript">
main.js :

app.set( 'view engine', 'jade' );

app.get( '/:someone', function( req, res ) {

    res.render('index', {
        people: req.params.someone
    });
});
                            </code>
                            <code class="hljs jade">
index.jade :
doctype html
html
    head
    body
        h1 Salut
            span= people
                            </code>
                        </pre>
                    </section>
                    <section>
                        <ul>
                            <li>Cas 4 : Un serveur en HTTPS</li>
                        </ul>
                        <div>
                            <small>Nécessite le packet https</small>
                        </div>
                        <pre>
                            <code>
const https = require('https');
const fs = require('fs');

const options = {

        key:  fs.readFileSync('certs/site.key'),
        cert: fs.readFileSync('certs/site.cert')
};

https.createServer(options, function(req, res) {

        res.writeHead(200);
        res.end('hello world\n');

}).listen(8080);
                            </code>
                        </pre>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Le temps des démos</h2>
                        <img src="">
                    </section>
                    <section>
                        <p>Quand je voue une confiance aveugle à mon code pendant une démo</p>
                        <img src="demo.gif" style="width: 60%;">
                    </section>
                </section>
                <section>
                    <img src="ask.jpg">
                </section>
            </div>
        </div>
        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>
        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                slideNumber: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>
